<%- include('partials/header', { title: product ? 'Edit Product' : 'Add Product' }) %>

<div class="form-container">
    <div class="form-header">
        <h2><%= formTitle %></h2>
        <a href="/admin/products" class="btn btn-secondary">‚Üê Back to Products</a>
    </div>

    <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert alert-error">
            <%= error %>
        </div>
    <% } %>

    <form action="<%= formAction %>" method="<%= formMethod === 'PUT' ? 'POST' : 'POST' %>" class="product-form">
        <% if (formMethod === 'PUT') { %>
            <input type="hidden" name="_method" value="PUT">
        <% } %>

        <div class="form-group">
            <label for="name">Product Name *</label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                value="<%= product ? product.name : '' %>" 
                required 
                placeholder="e.g., Margherita Pizza"
            >
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="price">Price ($) *</label>
                <input 
                    type="number" 
                    id="price" 
                    name="price" 
                    value="<%= product ? product.price : '' %>" 
                    step="0.01" 
                    min="0" 
                    required 
                    placeholder="9.99"
                >
            </div>

            <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                    <option value="">Select Category</option>
                    <% categories.forEach(cat => { %>
                        <option value="<%= cat %>" <%= product && product.category === cat ? 'selected' : '' %>>
                            <%= cat %>
                        </option>
                    <% }); %>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="image">Image URL *</label>
            <input 
                type="text" 
                id="image" 
                name="image" 
                value="<%= product ? product.image : '' %>" 
                required 
                placeholder="/images/pizza.png"
            >
            <small class="form-hint">Enter the path to the image file (e.g., /images/pizza.png)</small>
        </div>

        <div class="form-group">
            <label for="description">Description *</label>
            <textarea 
                id="description" 
                name="description" 
                rows="5" 
                required 
                placeholder="Describe the product..."><%= product ? product.description : '' %></textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <%= product ? 'Update Product' : 'Create Product' %>
            </button>
            <a href="/admin/products" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<%- include('partials/footer') %>

