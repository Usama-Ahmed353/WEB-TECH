<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Page</title>
  <link rel="shortcut icon" href="assets/logo New.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    :root {
      --primary-gradient: #4f2823;
      --dark-bg: #1a1d23;
      --card-bg: rgba(255, 255, 255, 0.95);
      --text-light: #6c757d;
      --success-color: #f00606;
      --accent-blue: #00d4ff;
    }

    body {
      background: var(--primary-gradient);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden; 
    }

    .sidebar {
      position: fixed;
      top: 0;
      top: -100%; 
      width: 100%;
      height: 100%;
      background: black;
      color: white;
      opacity: 0.90;
      transition: top 0.3s ease;
      z-index: 1050;
      padding-top: 3rem;
    }

    .sidebar.active {
      top: 0;
    }

    .sidebar .nav-link {
      color: white;
      font-size: 1.2rem;
      margin: 1rem 0;
    }

    .sidebar .nav-link:hover {
      color: #0d6efd;
    }

    .sidebar .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
    }

    .hamburger {
      width: 30px;
      height: 20px;
      position: relative;
      cursor: pointer;
      display: inline-block;
    }
    .hamburger span {
      position: absolute;
      height: 3px;
      width: 100%;
      background: black;
      border-radius: 3px;
      left: 0;
      transition: all 0.3s ease;
    }
    .hamburger span:nth-child(1) { top: 0; }
    .hamburger span:nth-child(2) { top: 8px; }
    .hamburger span:nth-child(3) { top: 16px; }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg);
      top: 8px;
    }
    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg);
      top: 8px;
    }

    .enhanced-card {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .enhanced-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }

    .form-control {
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 12px 16px;
      font-size: 16px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .form-control:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 0.2rem rgba(0, 212, 255, 0.25);
      background: white;
    }

    .btn-gradient {
      background: var(--primary-gradient);
      border: none;
      color: white;
      font-weight: 600;
      padding: 14px 28px;
      border-radius: 12px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-gradient:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
      color: white;
    }

    .btn-gradient::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .btn-gradient:hover::before {
      left: 100%;
    }

    .payment-option {
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.3s ease;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.9);
    }

    .payment-option:hover {
      border-color: var(--accent-blue);
      background: rgba(0, 212, 255, 0.05);
    }

    .payment-option.active {
      border-color: var(--accent-blue);
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 0 0.2rem rgba(0, 212, 255, 0.25);
    }

    .payment-icon {
      font-size: 24px;
      margin-right: 12px;
      color: var(--accent-blue);
    }

    .order-summary {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .product-item {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid rgba(0, 212, 255, 0.1);
      transition: all 0.3s ease;
    }

    .product-item:hover {
      transform: translateX(5px);
      box-shadow: 0 5px 15px rgba(0, 212, 255, 0.1);
    }

    .progress-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      position: relative;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 2;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f32105;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-bottom: 8px;
      box-shadow: 0 12px 48px rgba(153, 185, 8, 0.3);
    }

    .step-label {
      font-size: 12px;
      font-weight: 600;
      color: white;
    }

    .progress-line {
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary-gradient);
      z-index: 1;
    }

    .discount-code {
      background: rgba(255, 3, 3, 0.1);
      border: 1px solid var(--success-color);
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
    }

    .security-badge {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      background: rgba(255, 3, 3, 0.1);
      border-radius: 8px;
      color: var(--success-color);
      font-size: 14px;
      font-weight: 600;
      margin-top: 16px;
    }

    .floating-labels .form-floating > label {
      color: var(--text-light);
    }

    .modal-content {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-header {
      background: var(--primary-gradient);
      border: none;
    }

    .feature-highlight {
      background: rgba(0, 212, 255, 0.1);
      border-left: 4px solid var(--accent-blue);
      padding: 16px;
      border-radius: 0 12px 12px 0;
      margin: 16px 0;
    }

    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .quantity-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid var(--accent-blue);
      background: white;
      color: var(--accent-blue);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quantity-btn:hover {
      background: var(--accent-blue);
      color: white;
    }

    .invalid-feedback {
      display: none;
      width: 100%;
      margin-top: 0.25rem;
      font-size: 0.875em;
      color: #dc3545;
    }

    .was-validated .form-control:invalid, .form-control.is-invalid {
      border-color: #dc3545;
      padding-right: calc(1.5em + 0.75rem);
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 3.6.4.4.4-.4'/%3e%3cpath d='M6 7v1'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right calc(0.375em + 0.1875rem) center;
      background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }

    .was-validated .form-check-input:invalid, .form-check-input.is-invalid {
      border-color: #dc3545;
    }

    .was-validated .form-check-input:invalid ~ .form-check-label, .form-check-input.is-invalid ~ .form-check-label {
      color: #dc3545;
    }

    .was-validated .form-check-input:invalid:checked, .form-check-input.is-invalid:checked {
      background-color: #dc3545;
      border-color: #dc3545;
    }

    @media (max-width: 768px) {
      .Menu-items a {
        margin: 0 8px;
        font-size: 14px;
      }
      
      .progress-steps {
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .step-circle {
        width: 32px;
        height: 32px;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
<nav class="navbar bg-fluid ">
    <nav class="navbar ">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center text-white" href="index.html">
      <img src="images/BePizza.png" alt="BePizza Logo" width="170" height="auto" >
    </a>
  </div>
  </nav>
    <div class="hamburger"  id="hamburgerBtn">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
</nav>

<div class="sidebar" id="sidebarMenu">
  <button class="close-btn" id="closeBtn">&times;</button>
  <ul class="nav flex-column text-center mt-4">
    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
    <li class="nav-item"><a class="nav-link" href="menu.html">Menu</a></li>
    <li class="nav-item"><a class="nav-link" href="location.html">Location</a></li>
    <li class="nav-item"><a class="nav-link" href="join.html">Contact</a></li>
  </ul>
</div>

  <div class="container my-5">
    <div class="progress-steps">
      <div class="progress-line "></div>
      <div class="step">
        <div class="step-circle">1</div>
        <div class="step-label">Cart</div>
      </div>
      <div class="step">
        <div class="step-circle">2</div>
        <div class="step-label">Checkout</div>
      </div>
      <div class="step">
        <div class="step-circle">3</div>
        <div class="step-label">Payment</div>
      </div>
      <div class="step">
        <div class="step-circle">4</div>
        <div class="step-label">Complete</div>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-lg-7">
        <div class="card enhanced-card border-0 rounded-4">
          <div class="card-body p-4">
            <div class="d-flex align-items-center mb-4">
              <i class="fas fa-shopping-cart payment-icon me-2"></i>
              <h3 class="mb-0">Secure Checkout</h3>
            </div>

            <form id="checkoutForm" class="floating-labels needs-validation" novalidate>
              <div class="feature-highlight">
                <h5><i class="fas fa-user me-2"></i>Personal Information</h5>
              </div>
              
              <div class="row">
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="firstName" placeholder="John" required>
                    <label for="firstName">First Name</label>
                    <div class="invalid-feedback">Please enter your first name.</div>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="lastName" placeholder="Doe" required>
                    <label for="lastName">Last Name</label>
                    <div class="invalid-feedback">Please enter your last name.</div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-8 mb-3">
                  <div class="form-floating">
                    <input type="email" class="form-control" id="email" placeholder="example@email.com" required>
                    <label for="email">Email Address</label>
                    <div class="invalid-feedback">Please enter a valid email address.</div>
                  </div>
                </div>
                <div class="col-md-4 mb-3">
                  <div class="form-floating">
                    <input type="tel" class="form-control" id="phone" placeholder="+1234567890" required>
                    <label for="phone">Phone</label>
                    <div class="invalid-feedback">Please enter a valid phone number.</div>
                  </div>
                </div>
              </div>

              <div class="feature-highlight">
                <h5><i class="fas fa-truck me-2"></i>Shipping Information</h5>
              </div>

              <div class="mb-3">
                <div class="form-floating">
                  <input type="text" class="form-control" id="address" placeholder="123 Main St" required>
                  <label for="address">Street Address</label>
                  <div class="invalid-feedback">Please enter your address.</div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="city" placeholder="New York" required>
                    <label for="city">City</label>
                    <div class="invalid-feedback">Please enter your city.</div>
                  </div>
                </div>
                <div class="col-md-3 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="state" required>
                      <option value="">Choose...</option>
                      <option value="NY">New York</option>
                      <option value="CA">California</option>
                      <option value="TX">Texas</option>
                      <option value="FL">Florida</option>
                    </select>
                    <label for="state">State</label>
                    <div class="invalid-feedback">Please select a state.</div>
                  </div>
                </div>
                <div class="col-md-3 mb-3">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="zip" placeholder="12345" required>
                    <label for="zip">ZIP Code</label>
                    <div class="invalid-feedback">Please enter a valid ZIP code.</div>
                  </div>
                </div>
              </div>

                <div class="security-badge">
                <i class="fas fa-shield-alt me-2"></i>
                Your payment information is secured with 256-bit SSL encryption
              </div>

              <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" id="terms" required>
                <label class="form-check-label" for="terms">
                  I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> and <a href="#" class="text-decoration-none">Privacy Policy</a>
                </label>
                <div class="invalid-feedback">You must agree before submitting.</div>
              </div>

              <div class="d-grid mt-4">
                <button type="submit" class="btn btn-gradient btn-lg rounded-3">
                  <i class="fas fa-lock me-2"></i>Complete Order - $34.00
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="col-lg-5">
        <div class="order-summary enhanced-card">
          <h4 class="mb-3">
            <i class="fas fa-receipt me-2"></i>Order Summary
          </h4>

          <div class="product-item">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h6 class="mb-1">Tandoori Pizza</h6>
                <small class="text-muted">Extra Cheese Slice</small>
                <div class="quantity-controls mt-2">
                  <button type="button" class="quantity-btn" onclick="updateQuantity('product1', -1)">
                    <i class="fas fa-minus"></i>
                  </button>
                  <span id="product1-qty" class="fw-bold">1</span>
                  <button type="button" class="quantity-btn" onclick="updateQuantity('product1', 1)">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>
              <div class="text-end">
                <div class="fw-bold">$20.00</div>
                <button type="button" class="btn btn-sm btn-outline-danger mt-1">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="product-item">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h6 class="mb-1">Chicken Tikka Family</h6>
                <small class="text-muted">Extra Spicy</small>
                <div class="quantity-controls mt-2">
                  <button type="button" class="quantity-btn" onclick="updateQuantity('product2', -1)">
                    <i class="fas fa-minus"></i>
                  </button>
                  <span id="product2-qty" class="fw-bold">1</span>
                  <button type="button" class="quantity-btn" onclick="updateQuantity('product2', 1)">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>
              <div class="text-end">
                <div class="fw-bold">$15.00</div>
                <button type="button" class="btn btn-sm btn-outline-danger mt-1">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="discount-code">
            <div class="d-flex gap-2">
              <input type="text" class="form-control form-control-sm" placeholder="Enter discount code" id="discountCode">
              <button  style="background: red;" type="button" class="btn btn-success btn-sm" onclick="applyDiscount()">Apply</button>
            </div>
          </div>

          <hr class="my-3">
          <div class="d-flex justify-content-between mb-2">
            <span>Subtotal:</span>
            <span id="subtotal">$34.00</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Shipping:</span>
            <span id="shippingCost">Free</span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>Tax:</span>
            <span id="tax">$3.15</span>
          </div>
          <div class="d-flex justify-content-between mb-2" id="discountRow" style="display: none;">
            <span class="text-success">Discount:</span>
            <span class="text-success" id="discountAmount">-$0.00</span>
          </div>
          <hr>
          <div class="d-flex justify-content-between fs-5 fw-bold">
            <span>Total:</span>
            <span id="totalAmount">$38.15</span>
          </div>

          
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4">
        <div class="modal-header rounded-top-4 text-white">
          <h5 class="modal-title">
            <i class="fas fa-check-circle me-2"></i>Order Successful
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
          </div>
          <h4 class="text-success mb-3">Thank You for Your Order!</h4>
          <p class="fs-5">Your order #FR2024-001 has been placed successfully.</p>
          <p class="text-muted">You will receive a confirmation email shortly with tracking information.</p>
          <div class="alert alert-info mt-3">
            <i class="fas fa-info-circle me-2"></i>
            Estimated delivery: 5-7 business days
          </div>
        </div>
        <div class="modal-footer justify-content-center">
          <button class="btn btn-gradient me-2" onclick="trackOrder()">
            <i class="fas fa-search me-2"></i>Track Order
          </button>
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Continue Shopping</button>
        </div>
      </div>
    </div>
  </div>

<script>
$(document).ready(function() {
  const hamburgerBtn = document.getElementById('hamburgerBtn');
  const sidebarMenu = document.getElementById('sidebarMenu');
  const closeBtn = document.getElementById('closeBtn');

  if (hamburgerBtn && sidebarMenu && closeBtn) {
    hamburgerBtn.addEventListener('click', function() {
      sidebarMenu.classList.add('active');
      hamburgerBtn.classList.add('active');
    });

    closeBtn.addEventListener('click', function() {
      sidebarMenu.classList.remove('active');
      hamburgerBtn.classList.remove('active');
    });
  }

  $('#cardNumber').on('input', function() {
    let value = $(this).val().replace(/\s+/g, '').replace(/[^0-9]/gi, '');
    let formattedValue = '';
    
    for (let i = 0; i < value.length; i++) {
      if (i > 0 && i % 4 === 0) {
        formattedValue += ' ';
      }
      formattedValue += value[i];
    }
    
    $(this).val(formattedValue);
  });

  // Format expiry date input
  $('#expiry').on('input', function() {
    let value = $(this).val().replace(/\s+/g, '').replace(/[^0-9]/gi, '');
    
    if (value.length >= 2) {
      value = value.substring(0, 2) + '/' + value.substring(2, 4);
    }
    
    $(this).val(value);
  });

  $('#firstName, #lastName').on('input', function() {
    const value = $(this).val().trim();
    if (value.length > 0) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#email').on('input', function() {
    const email = $(this).val().trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    
    if (emailRegex.test(email)) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#phone').on('input', function() {
    const phone = $(this).val().trim();
    const phoneRegex = /^\d{10,15}$/;
    
    if (phoneRegex.test(phone.replace(/\D/g, ''))) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#address, #city').on('input', function() {
    const value = $(this).val().trim();
    if (value.length > 0) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#zip').on('input', function() {
    const zip = $(this).val().trim();
    const zipRegex = /^\d{5}(-\d{4})?$/;
    
    if (zipRegex.test(zip)) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#state').on('change', function() {
    if ($(this).val() !== '') {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  // Card validation
  $('#cardNumber').on('input', function() {
    const cardNumber = $(this).val().replace(/\s+/g, '');
    const cardRegex = /^\d{13,19}$/;
    
    if (cardRegex.test(cardNumber)) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#expiry').on('input', function() {
    const expiry = $(this).val().trim();
    const expiryRegex = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
    
    if (expiryRegex.test(expiry)) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#cvv').on('input', function() {
    const cvv = $(this).val().trim();
    const cvvRegex = /^\d{3,4}$/;
    
    if (cvvRegex.test(cvv)) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#cardName').on('input', function() {
    const value = $(this).val().trim();
    if (value.length > 0) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#terms').on('change', function() {
    if ($(this).is(':checked')) {
      $(this).removeClass('is-invalid').addClass('is-valid');
    } else {
      $(this).removeClass('is-valid').addClass('is-invalid');
    }
  });

  $('#checkoutForm').on('submit', function(e) {
    e.preventDefault();
    
    let isValid = true;
    
    const requiredFields = [
      '#firstName', '#lastName', '#email', '#phone', 
      '#address', '#city', '#zip', '#state'
    ];
    
    requiredFields.forEach(field => {
      const $field = $(field);
      if ($field.val().trim() === '') {
        $field.addClass('is-invalid');
        isValid = false;
      }
    });
    
    const email = $('#email').val().trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      $('#email').addClass('is-invalid');
      isValid = false;
    }
    
    const phone = $('#phone').val().trim();
    const phoneRegex = /^\d{10,15}$/;
    if (!phoneRegex.test(phone.replace(/\D/g, ''))) {
      $('#phone').addClass('is-invalid');
      isValid = false;
    }
    
    const zip = $('#zip').val().trim();
    const zipRegex = /^\d{5}(-\d{4})?$/;
    if (!zipRegex.test(zip)) {
      $('#zip').addClass('is-invalid');
      isValid = false;
    }
    
    if ($('#cardPayment').is(':checked')) {
      const cardFields = ['#cardNumber', '#expiry', '#cvv', '#cardName'];
      
      cardFields.forEach(field => {
        const $field = $(field);
        if ($field.val().trim() === '') {
          $field.addClass('is-invalid');
          isValid = false;
        }
      });
      
      const cardNumber = $('#cardNumber').val().replace(/\s+/g, '');
      const cardRegex = /^\d{13,19}$/;
      if (!cardRegex.test(cardNumber)) {
        $('#cardNumber').addClass('is-invalid');
        isValid = false;
      }
      
      const expiry = $('#expiry').val().trim();
      const expiryRegex = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
      if (!expiryRegex.test(expiry)) {
        $('#expiry').addClass('is-invalid');
        isValid = false;
      }
      
      const cvv = $('#cvv').val().trim();
      const cvvRegex = /^\d{3,4}$/;
      if (!cvvRegex.test(cvv)) {
        $('#cvv').addClass('is-invalid');
        isValid = false;
      }
    }
    
    if (!$('#terms').is(':checked')) {
      $('#terms').addClass('is-invalid');
      isValid = false;
    }
    
    if (isValid) {
      $('#successModal').modal('show');
    } else {
      $('html, body').animate({
        scrollTop: $('.is-invalid').first().offset().top - 100
      }, 500);
    }
  });
});


function selectShipping(type) {
  $('.payment-option').removeClass('active');
  $(`#${type}Shipping`).closest('.payment-option').addClass('active');
  
  let shippingCost = 0;
  switch(type) {
    case 'standard':
      shippingCost = 0;
      $('#shippingCost').text('Free');
      break;
    case 'express':
      shippingCost = 15.99;
      $('#shippingCost').text('$15.99');
      break;
    case 'overnight':
      shippingCost = 29.99;
      $('#shippingCost').text('$29.99');
      break;
  }
  
  updateOrderTotal();
}

// Payment method selection
function selectPayment(type) {
  $('.payment-option').removeClass('active');
  $(`#${type}Option`).addClass('active');
  
  // Show/hide card details based on selection
  if (type === 'card') {
    $('#cardDetails').show();
    // Add required attribute to card fields
    $('#cardNumber, #expiry, #cvv, #cardName').prop('required', true);
  } else {
    $('#cardDetails').hide();
    $('#cardNumber, #expiry, #cvv, #cardName').prop('required', false);
  }
}

function updateQuantity(productId, change) {
  const qtyElement = $(`#${productId}-qty`);
  let currentQty = parseInt(qtyElement.text());
  let newQty = currentQty + change;
  
  if (newQty < 1) newQty = 1;
  
  qtyElement.text(newQty);
  updateOrderTotal();
}

// Apply discount
function applyDiscount() {
  const discountCode = $('#discountCode').val().trim().toUpperCase();
  
  if (discountCode === 'SAVE10') {
    $('#discountRow').show();
    $('#discountAmount').text('-$3.50');
    updateOrderTotal();
  } else {
    alert('Invalid discount code. Please try again.');
  }
}

// Update order total
function updateOrderTotal() {
  // Calculate subtotal
  const product1Qty = parseInt($('#product1-qty').text());
  const product2Qty = parseInt($('#product2-qty').text());
  const subtotal = (product1Qty * 20) + (product2Qty * 15);
  $('#subtotal').text('$' + subtotal.toFixed(2));
  
  let shippingCost = 0;
  if ($('#expressShipping').is(':checked')) {
    shippingCost = 15.99;
  } else if ($('#overnightShipping').is(':checked')) {
    shippingCost = 29.99;
  }
  
  const tax = subtotal * 0.09;
  $('#tax').text('$' + tax.toFixed(2));
  
  let discount = 0;
  if ($('#discountRow').is(':visible')) {
    discount = 3.50;
  }
  
  const total = subtotal + shippingCost + tax - discount;
  $('#totalAmount').text('$' + total.toFixed(2));
  
  $('.btn-gradient').html(`<i class="fas fa-lock me-2"></i>Complete Order - $${total.toFixed(2)}`);
}

function trackOrder() {
  alert('Tracking information will be sent to your email shortly.');
  $('#successModal').modal('hide');
}

$(document).ready(function() {
  selectPayment('card');
  updateOrderTotal();
});
</script>
</body>
</html>